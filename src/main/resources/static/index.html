<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<button onclick="startWs()">
    pressss
</button>
<textarea id="textarea"></textarea>
<br/>

<ul id="chat">
    <li><a href="#">chat</a></li>
</ul>
<script>
    var s = new Date().getTime();
    var ws = new WebSocket("ws://localhost:8080/questions");
    ws.onopen = function () {
        ws.send(s + ": Hello, here I am!");
    };

    ws.onmessage = function (event) {
        console.log(event.data);
        $("#chat").append('<li>' + event.data + '</li>');
    };

    ws.onclose = function (event) {
        console.log('connection closed ' + event.code);
        ws = new WebSocket()
    };

    $("#textarea").keypress(function (e) {
        if(e.which == 13 && !e.shiftKey) {
            $(this).closest("form").submit();
            e.preventDefault();
        }
    });

    function startWs() {
        ws.send(s + ": " + $("#textarea").val());
    }


</script>
</body>
</html>